---
## Front mattertitle:
title: "Отчёт по лабораторной работе № 9"
subtitle: "Дисцпилина: Архитектура компьютеров"
author: "Хоюгбан Ганчыыр Анатольевич"

## Generic otions
lang: ru-RU
toc-title: "Содержание"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true # Table of contents
toc-depth: 2
lof: true # List of figures
lot: true # List of tables
fontsize: 12pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
	- spelling=modern
	- babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: PT Serif
romanfont: PT Serif
sansfont: PT Sans
monofont: PT Mono
mainfontoptions: Ligatures=TeX
romanfontoptions: Ligatures=TeX
sansfontoptions: Ligatures=TeX,Scale=MatchLowercase
monofontoptions: Scale=MatchLowercase,Scale=0.9
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float} # keep figures where there are in the text
  - \floatplacement{figure}{H} # keep figures where there are in the text
---

# Цель работы

Приобретение навыков написания программ с использованием подпрограмм. Знакомство
с методами отладки при помощи GDB и его основными возможностями.

# Выполнение лабораторной работы

Для начала открыл терминал, перехожу на каталог, через которую буду выполнять 9 лабораторную, а затем создаю файл lab9-1.asm(рис. @fig:001)

![Создание файла lab9-1.asm](image/Снимок экрана от 2023-12-09 11-14-39.png){#fig:001 width=70%}

Написал текст прогрммы с использованием вызова подпрограммы, что я демонстрирую вам на рисунке(рис. @fig:002)

![Текст программы файла lab9-1.asm](image/Снимок экрана от 2023-12-09 11-47-56.png){#fig:002 width=70%}

Перевел файл lab9-1.asm в объектный, сделал компоновку и отправил на исполнение, куда в итоге ввел значения 1 и 2(рис. @fig:003)

![Исполнение программы файла lab9-1.asm](image/Снимок экрана от 2023-12-09 12-04-34.png){#fig:003 width=70%}

Изменил текст программы, как требует лабораторная, для вновь созданного файла lab9-2.asm, что показываю на рисунке (рис. @fig:004)

![Текст программы файла lab9-2.asm](image/Снимок экрана от 2023-12-09 12-04-52.png){#fig:004 width=70%}

Перевел файл lab9-2.asm в объектный, сделал компоновку и отправил на исполнение, куда в итоге ввел значения 1 и 2(рис. @fig:005)

![Исполнение программы файла lab9-2.asm](image/Снимок экрана от 2023-12-09 12-05-05.png){#fig:005 width=70%}

Напечатал текст программы для вызова сообщения Hello world!, что показываю на рисунке(рис. @fig:006)

![Текст программы для сообщения Hello world!](image/Снимок экрана от 2023-12-09 12-12-06.png){#fig:006 width=70%}

Перевел файл lab9-3.asm в объектный, сделал компоновку и отправил на исполнени, где открылся отладчик gdb(рис. @fig:007)

![Открытие отлладчика gdb](image/Снимок экрана от 2023-12-14 15-16-45.png){#fig:007 width=70%}

Проверил работу программы, запустив ее в оболочке gdb с помощью команды run(рис. @fig:008)

![Команда  run](image/Снимок экрана от 2023-12-14 15-17-13.png){#fig:008 width=70%}

Установил брейкпоинг а метку _start, с которой начинается выполнение любой ассемблерной программы, а затем запустил ее(рис. @fig:009)

![Установка брейкпоинга](image/Снимок экрана от 2023-12-14 15-17-35.png){#fig:009 width=70%}

Посмотрел дисассимилированный код программы с помощью  disassemle(рис. @fig:010)

![Дисассимилированный код](image/Снимок экрана от 2023-12-14 15-18-53.png){#fig:010 width=70%}

Переключился на отображение команд с Intelовским синтаксисом, введя команду set(рис. @fig:011)

![Переключение на синтаксис Intel](image/Снимок экрана от 2023-12-14 15-19-03.png){#fig:011 width=70%}

Включил режим псевдографики для удобного аналища программы(рис. @fig:012)

![Режим псевдографики](image/Снимок экрана от 2023-12-14 15-19-48.png){#fig:012 width=70%}

Проверяю точку остновки по имени _start(рис. @fig:013)

![Точка остановки](image/Снимок экрана от 2023-12-14 15-20-15.png){#fig:013 width=70%}

Смотрю информацию о всех установленных точках останова с помощью команды i b (рис. @fig:014)

![Информация о точках останова](image/Снимок экрана от 2023-12-14 15-27-15.png){#fig:014 width=70%}

Посмотрел значени переменной msg2 по адресу, а затем изменяю первый символ в переменной msg1(рис. @fig:015)

![Значение msg2 и изменение первого символа msg1](image/Снимок экрана от 2023-12-14 15-30-45.png){#fig:015 width=70%}

Изменил значение первого символа переменной msg2(рис. @fig:016)

![Изменение первого символа msg2](image/Снимок экрана от 2023-12-14 15-31-21.png){#fig:016 width=70%}

Примеры использования команды print(рис. @fig:017)

![Команды print](image/Снимок экрана от 2023-12-14 15-32-00.png){#fig:017 width=70%}

С помощью команды set изменяю значение регистра ebx. Разница вывода из-за того что в первом случае 2 это символ а во втором число(рис. @fig:018)

![Изменение значения регистра](image/Снимок экрана от 2023-12-14 15-32-38.png){#fig:018 width=70%}

Скопировал файл lab8-2.asm, созданный при выполнении лабораторной работы №8, в файл lab9-4.asm (рис. @fig:019)

![Копирование файла и создание исполянемого](image/Снимок экрана от 2023-12-14 15-39-06.png){#fig:019 width=70%}

Запускаю программу в оболочке gdb (рис. @fig:020)

![Запуск программы в оболочке отладки](image/Снимок экрана от 2023-12-14 15-40-38.png){#fig:020 width=70%}

Узнаю количество аргументов, а затем смотрю все позиции стека. Их адреса распологаются в 4 байтах друг от друга(рис. @fig:021)

![Количество аргументов 4 и просмотр позиций стека](image/Снимок экрана от 2023-12-14 15-42-50.png){#fig:021 width=70%}


# Выполнение самостоятельной работы

Для выполнение самостоятельной работы беру текст файла из лабораторной №8, но с использованием подпрограмм. Текст программы демонстрирую на рисунке(рис. @fig:022)

![Текст программы файла из 8 лабораторной с подпрограмами](image/Снимок экрана от 2023-12-14 15-49-29.png){#fig:022 width=70%}

Перевел файл lab9-5.asm в объектный, сделал компоновку и отправил на исполнение, куда в итоге ввел аргументы 1 2 3 4(рис. @fig:023)

![Исполнение файла из 8 лабораторной с подпрограммами](image/Снимок экрана от 2023-12-14 15-49-42.png){#fig:023 width=70%}

Затем я отредактировал файл, нашел некоторые несостыковки при использлвании отладчика и нашел ошибки в строках, а именно:
add ebx, eax
mov ecx,4
mul ecx 
add ebx,5
mov edi,ebx
Я исправил текст программы и демонстрирую вам исправленный код(рис. @fig:024)

![Исправленный текст программы из 8 лабораторно](image/Снимок экрана от 2023-12-14 15-49-56.png){#fig:024 width=70%}

Перевел файл lab9-6.asm в объектный, сделал компоновку и отправил на исполнение, откуда получил в результате 25(рис. @fig:025)

![Исполнение исправленного текста программы из 8 лабораторной](image/Снимок экрана от 2023-12-14 15-50-11.png){#fig:025 width=70%}


# Вывод

В результате выполнение лабораторной работы, я научился организовывать код в подпрограммы и познакомился с базовыми функциями отладчика gdb

